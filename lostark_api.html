<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  .list__card {
    list-style-type: none;
    transition: border-color .2s;
    display: block;
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    box-sizing: border-box;
    border: 1px solid #ddd;
    text-align: center;
  }
</style>

<body>


  <li class="list__card">
    <div class="list__thumb"><img src="" alt=""></div>
    <div class="list__subject" aria-label="제목">
      <span class="list__title"></span>
    </div>
    <div class="list__start__term"><strong></strong> </div>
    <div class="list__end__term"><strong></strong> </div>
  </li>





  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>
  <script>

    $.ajax({
      type: "GET",
      url: CharacterUrl(),
      dataType: 'json',
      headers: {
        'accept': 'application/json',
        'authorization': APIkey() // 필요한 경우 JWT를 여기에 추가
      },
      success: function (data) {
        // json 객체 배열
        const filteredData = data.filter(info => info.ServerName === '카단');
        // ItemMaxLevel type=string "2,000.00" 이런식으로저장
        // ,제거
        filteredData.forEach(function (info) {
          info.ItemMaxLevel = parseFloat(info.ItemMaxLevel.replace(',', ''));
        });
        // string > float
        filteredData.forEach(function (info) {
          info.ItemMaxLevel = parseFloat(info.ItemMaxLevel);
        });
        // sort로 내림차순
        filteredData.sort(function (a, b) {
          return b.ItemMaxLevel - a.ItemMaxLevel;
        });

        filteredData.forEach(function (info) {
          const listItem = document.createElement('li');
          listItem.innerHTML = `
            <img src="/img/characterIMG/${info.CharacterName}.png" alt="이미지_설명" class="characterImg">
            <p class="text_className"><img src="/img/occupationICON/${info.CharacterClassName}.png" alt="이미지_설명" class="profile-character-info__img"><span class = "CharacterName">${info.CharacterName}</span><span class = "CharacterLevel">Lv:${info.ItemMaxLevel}</span></p>
        `;

          characterList.appendChild(listItem);
        });
      },
    });

  </script>
</body>

</html>